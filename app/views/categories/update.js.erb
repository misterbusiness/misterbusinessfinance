<% if @category.errors.any? -%>
$("#flash_notice").hide(300);
$("#error_explanation").html("<%= escape_javascript(error_messages_for(@category))%>");
$("#error_explanation").show(300);
<% else -%>
$("#error_explanation").hide(300);
$("#flash_notice").html("<%= escape_javascript(flash[:notice])%>");
$("#flash_notice").show(300);

$(":input:not(input[type=submit])").val("");

<% @category = Category.new %>
$("#category_form").html("<%= escape_javascript(render(:partial => 'form'))%>");
$("#category_tree").html("<%= escape_javascript(render(:partial => 'tree'))%>");
<% end -%>