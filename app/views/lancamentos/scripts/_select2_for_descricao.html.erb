<script type="text/javascript">
	
		$(document).ready(function() { 
			$("#<%= @page_item_id %>").select2({
				width: "resolve",
				maximumSelectionSize: 1,	
				createSearchChoice: true,			
				placeholder: "<%= @placeholder_value %>",
				tags: [<%= render 'shared/data_iterator'%>]							
			});
			$("#lancamento_descricao").change(function(){							
				var selectedValue = $("#lancamento_descricao").val();				
				var jqxhr =
					$.ajax({
						url: "<%= lancamentorapidos_path %>/" + selectedValue,
						dataType: 'json',
						data: {}
					})
					.success(function(response){																	
						$("#lancamento_descricao").val(response.descricao);
												
						var radio_receita = $('#lancamento_tipo_receita');
						var radio_despesa = $('#lancamento_tipo_despesa');
						// Adicionados labels para fazer a troca de cores na seleção			
						var label_receita = $("#receita_label");
						var label_despesa = $("#despesa_label");
						
						if (response.tipo_cd == 1)		
						{
							radio_despesa.prop("checked",true);
							label_despesa.removeClass('label-default').addClass('label-important');
							label_receita.removeClass('label-success').addClass('label-default');
						}
						else
						{
							radio_receita.prop("checked",true);
							label_receita.removeClass('label-default').addClass('label-success');
							label_despesa.removeClass('label-important').addClass('label-default');
						}						
						$("#lancamento_valor").val(response.valor);						
						
						var selectedDate = new Date((new Date).getFullYear(), (new Date).getMonth(), response.diavencimento);
						$("#datepicker").datepicker("setDate", selectedDate);
						$("#datepicker").datepicker({ dateFormat: "dd-mm-yy" });
						
						$("#categoria_place").val(response.category_id).trigger("change");
						$("#centrodecusto_place").val(response.centrodecusto_id).trigger("change");								
					})
					.error(function(){
						// Erro ocorre quando não encontra nenhum registro
					})
			});
			
		});
</script>
